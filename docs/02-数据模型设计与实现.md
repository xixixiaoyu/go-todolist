# ğŸ“š Go Todolist é¡¹ç›®å­¦ä¹ æ–‡æ¡£ - ç¬¬äºŒç« ï¼šæ•°æ®æ¨¡å‹è®¾è®¡ä¸å®ç°

## ğŸ¯ å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œæ‚¨å°†æŒæ¡ï¼š
- Go è¯­è¨€ç»“æ„ä½“çš„è®¾è®¡åŸåˆ™
- JSON æ ‡ç­¾çš„ä½¿ç”¨æ–¹æ³•
- æ•°æ®éªŒè¯çš„å®ç°æŠ€å·§
- é”™è¯¯å¤„ç†çš„æœ€ä½³å®è·µ

## ğŸ“‹ æ•°æ®æ¨¡å‹æ¦‚è¿°

æ•°æ®æ¨¡å‹æ˜¯åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒï¼Œå®ƒå®šä¹‰äº†æ•°æ®çš„ç»“æ„ã€éªŒè¯è§„åˆ™å’Œä¸šåŠ¡é€»è¾‘ã€‚åœ¨æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åº”ç”¨ä¸­ï¼Œéœ€è¦è®¾è®¡ä»¥ä¸‹æ¨¡å‹ï¼š

1. **Todo æ¨¡å‹**ï¼šå¾…åŠäº‹é¡¹çš„æ ¸å¿ƒæ•°æ®ç»“æ„
2. **è¯·æ±‚æ¨¡å‹**ï¼šAPI è¯·æ±‚çš„æ•°æ®ç»“æ„
3. **éªŒè¯é€»è¾‘**ï¼šç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œæœ‰æ•ˆæ€§

## ğŸ—ï¸ Todo æ¨¡å‹è®¾è®¡

### æ ¸å¿ƒæ•°æ®ç»“æ„

```go
// Todo è¡¨ç¤ºå¾…åŠäº‹é¡¹çš„æ•°æ®æ¨¡å‹
type Todo struct {
    ID          int       `json:"id"`
    Title       string    `json:"title"`
    Description string    `json:"description"`
    Completed   bool      `json:"completed"`
    CreatedAt   time.Time `json:"created_at"`
    UpdatedAt   time.Time `json:"updated_at"`
}
```

### å­—æ®µè®¾è®¡è¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| `ID` | `int` | å”¯ä¸€æ ‡è¯†ç¬¦ | è‡ªåŠ¨ç”Ÿæˆï¼Œä¸»é”® |
| `Title` | `string` | å¾…åŠäº‹é¡¹æ ‡é¢˜ | å¿…å¡«ï¼Œæœ€å¤§ 100 å­—ç¬¦ |
| `Description` | `string` | è¯¦ç»†æè¿° | å¯é€‰ï¼Œæœ€å¤§ 500 å­—ç¬¦ |
| `Completed` | `bool` | å®ŒæˆçŠ¶æ€ | é»˜è®¤ false |
| `CreatedAt` | `time.Time` | åˆ›å»ºæ—¶é—´ | è‡ªåŠ¨è®¾ç½® |
| `UpdatedAt` | `time.Time` | æ›´æ–°æ—¶é—´ | è‡ªåŠ¨æ›´æ–° |

### JSON æ ‡ç­¾è¯¦è§£

```go
`json:"id"`           // åºåˆ—åŒ–ä¸º "id"
`json:"created_at"`   // åºåˆ—åŒ–ä¸º "created_at"ï¼ˆä¸‹åˆ’çº¿å‘½åï¼‰
`json:"title"`        // åºåˆ—åŒ–ä¸º "title"
```

**ä¸ºä»€ä¹ˆä½¿ç”¨ä¸‹åˆ’çº¿å‘½åï¼Ÿ**
- ç¬¦åˆ REST API çš„å¸¸è§çº¦å®š
- ä¸å‰ç«¯ JavaScript çš„å‘½åä¹ æƒ¯ä¸€è‡´
- æé«˜ API çš„å¯è¯»æ€§

## ğŸ“ è¯·æ±‚æ¨¡å‹è®¾è®¡

### åˆ›å»ºè¯·æ±‚æ¨¡å‹

```go
// CreateTodoRequest è¡¨ç¤ºåˆ›å»ºå¾…åŠäº‹é¡¹çš„è¯·æ±‚ç»“æ„
type CreateTodoRequest struct {
    Title       string `json:"title"`
    Description string `json:"description"`
}
```

**è®¾è®¡åŸåˆ™ï¼š**
- åªåŒ…å«ç”¨æˆ·å¯ä»¥è¾“å…¥çš„å­—æ®µ
- æ’é™¤ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µï¼ˆIDã€æ—¶é—´æˆ³ï¼‰
- æ’é™¤ç³»ç»Ÿç®¡ç†çš„å­—æ®µï¼ˆCompleted é»˜è®¤ä¸º falseï¼‰

### æ›´æ–°è¯·æ±‚æ¨¡å‹

```go
// UpdateTodoRequest è¡¨ç¤ºæ›´æ–°å¾…åŠäº‹é¡¹çš„è¯·æ±‚ç»“æ„
type UpdateTodoRequest struct {
    Title       *string `json:"title,omitempty"`
    Description *string `json:"description,omitempty"`
    Completed   *bool   `json:"completed,omitempty"`
}
```

**å…³é”®è®¾è®¡ç‚¹ï¼š**

1. **æŒ‡é’ˆç±»å‹**ï¼šä½¿ç”¨ `*string` å’Œ `*bool`
   - åŒºåˆ†"æœªæä¾›"å’Œ"ç©ºå€¼"
   - `nil` è¡¨ç¤ºå­—æ®µæœªåœ¨è¯·æ±‚ä¸­æä¾›
   - ç©ºå­—ç¬¦ä¸² `""` è¡¨ç¤ºç”¨æˆ·æƒ³è¦æ¸…ç©ºå­—æ®µ

2. **omitempty æ ‡ç­¾**ï¼š
   - åºåˆ—åŒ–æ—¶å¿½ç•¥é›¶å€¼å­—æ®µ
   - å‡å°‘ JSON å“åº”çš„å¤§å°
   - æé«˜ API çš„æ¸…æ™°åº¦

### éƒ¨åˆ†æ›´æ–°çš„å®ç°é€»è¾‘

```go
// æ›´æ–°é€»è¾‘ç¤ºä¾‹
if req.Title != nil {
    todo.Title = *req.Title        // æ›´æ–°æ ‡é¢˜
}
if req.Description != nil {
    todo.Description = *req.Description  // æ›´æ–°æè¿°
}
if req.Completed != nil {
    todo.Completed = *req.Completed     // æ›´æ–°çŠ¶æ€
}
```

## âœ… æ•°æ®éªŒè¯å®ç°

### éªŒè¯æ¥å£è®¾è®¡

```go
// Validate éªŒè¯åˆ›å»ºè¯·æ±‚çš„æœ‰æ•ˆæ€§
func (req *CreateTodoRequest) Validate() error {
    if req.Title == "" {
        return &ValidationError{
            Field:   "title",
            Message: "æ ‡é¢˜ä¸èƒ½ä¸ºç©º",
        }
    }
    
    if len(req.Title) > 100 {
        return &ValidationError{
            Field:   "title",
            Message: "æ ‡é¢˜é•¿åº¦ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦",
        }
    }
    
    if len(req.Description) > 500 {
        return &ValidationError{
            Field:   "description",
            Message: "æè¿°é•¿åº¦ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦",
        }
    }
    
    return nil
}
```

### è‡ªå®šä¹‰é”™è¯¯ç±»å‹

```go
// ValidationError è¡¨ç¤ºéªŒè¯é”™è¯¯
type ValidationError struct {
    Field   string `json:"field"`
    Message string `json:"message"`
}

func (e *ValidationError) Error() string {
    return e.Message
}
```

**é”™è¯¯è®¾è®¡ä¼˜åŠ¿ï¼š**
- ç»“æ„åŒ–é”™è¯¯ä¿¡æ¯
- åŒ…å«å…·ä½“çš„å­—æ®µä¿¡æ¯
- ä¾¿äºå‰ç«¯æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯
- å®ç°äº† `error` æ¥å£

## ğŸ”§ å®Œæ•´å®ç°ä»£ç 

### models/todo.go

```go
package models

import (
    "time"
)

// Todo è¡¨ç¤ºå¾…åŠäº‹é¡¹çš„æ•°æ®æ¨¡å‹
type Todo struct {
    ID          int       `json:"id"`
    Title       string    `json:"title"`
    Description string    `json:"description"`
    Completed   bool      `json:"completed"`
    CreatedAt   time.Time `json:"created_at"`
    UpdatedAt   time.Time `json:"updated_at"`
}

// CreateTodoRequest è¡¨ç¤ºåˆ›å»ºå¾…åŠäº‹é¡¹çš„è¯·æ±‚ç»“æ„
type CreateTodoRequest struct {
    Title       string `json:"title"`
    Description string `json:"description"`
}

// UpdateTodoRequest è¡¨ç¤ºæ›´æ–°å¾…åŠäº‹é¡¹çš„è¯·æ±‚ç»“æ„
type UpdateTodoRequest struct {
    Title       *string `json:"title,omitempty"`
    Description *string `json:"description,omitempty"`
    Completed   *bool   `json:"completed,omitempty"`
}

// Validate éªŒè¯åˆ›å»ºè¯·æ±‚çš„æœ‰æ•ˆæ€§
func (req *CreateTodoRequest) Validate() error {
    if req.Title == "" {
        return &ValidationError{Field: "title", Message: "æ ‡é¢˜ä¸èƒ½ä¸ºç©º"}
    }
    if len(req.Title) > 100 {
        return &ValidationError{Field: "title", Message: "æ ‡é¢˜é•¿åº¦ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦"}
    }
    if len(req.Description) > 500 {
        return &ValidationError{Field: "description", Message: "æè¿°é•¿åº¦ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦"}
    }
    return nil
}

// ValidationError è¡¨ç¤ºéªŒè¯é”™è¯¯
type ValidationError struct {
    Field   string `json:"field"`
    Message string `json:"message"`
}

func (e *ValidationError) Error() string {
    return e.Message
}
```

## ğŸ’¡ è®¾è®¡æ¨¡å¼ä¸æœ€ä½³å®è·µ

### 1. å•ä¸€èŒè´£åŸåˆ™
- æ¯ä¸ªç»“æ„ä½“åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½
- `Todo` è´Ÿè´£æ•°æ®è¡¨ç¤º
- `CreateTodoRequest` è´Ÿè´£åˆ›å»ºè¯·æ±‚
- `UpdateTodoRequest` è´Ÿè´£æ›´æ–°è¯·æ±‚

### 2. å¼€é—­åŸåˆ™
- é€šè¿‡æ¥å£å’Œæ–¹æ³•æ‰©å±•åŠŸèƒ½
- éªŒè¯é€»è¾‘å¯ä»¥ç‹¬ç«‹ä¿®æ”¹å’Œæ‰©å±•

### 3. ä¾èµ–å€’ç½®åŸåˆ™
- å®šä¹‰æ¸…æ™°çš„æ•°æ®å¥‘çº¦
- ä¸Šå±‚æ¨¡å—ä¸ä¾èµ–å…·ä½“å®ç°

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹è®¾è®¡

### éªŒè¯åŠŸèƒ½æµ‹è¯•

```go
func TestCreateTodoRequest_Validate(t *testing.T) {
    tests := []struct {
        name    string
        req     CreateTodoRequest
        wantErr bool
    }{
        {
            name: "æœ‰æ•ˆè¯·æ±‚",
            req:  CreateTodoRequest{Title: "æµ‹è¯•ä»»åŠ¡", Description: "æµ‹è¯•æè¿°"},
            wantErr: false,
        },
        {
            name: "ç©ºæ ‡é¢˜",
            req:  CreateTodoRequest{Title: "", Description: "æµ‹è¯•æè¿°"},
            wantErr: true,
        },
        {
            name: "æ ‡é¢˜è¿‡é•¿",
            req:  CreateTodoRequest{Title: strings.Repeat("a", 101), Description: "æµ‹è¯•æè¿°"},
            wantErr: true,
        },
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            err := tt.req.Validate()
            if (err != nil) != tt.wantErr {
                t.Errorf("Validate() error = %v, wantErr %v", err, tt.wantErr)
            }
        })
    }
}
```

## ğŸ¯ æœ¬ç« å°ç»“

é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œæˆ‘ä»¬å®Œæˆäº†ï¼š

1. âœ… **æ•°æ®æ¨¡å‹è®¾è®¡**ï¼šå®šä¹‰äº† Todo æ ¸å¿ƒç»“æ„
2. âœ… **è¯·æ±‚æ¨¡å‹è®¾è®¡**ï¼šåˆ›å»ºå’Œæ›´æ–°è¯·æ±‚çš„ç»“æ„
3. âœ… **æ•°æ®éªŒè¯å®ç°**ï¼šç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§
4. âœ… **é”™è¯¯å¤„ç†è®¾è®¡**ï¼šç»“æ„åŒ–çš„é”™è¯¯ä¿¡æ¯

### å…³é”®æ”¶è·
- ç†è§£äº† Go ç»“æ„ä½“çš„è®¾è®¡åŸåˆ™
- æŒæ¡äº† JSON æ ‡ç­¾çš„ä½¿ç”¨æ–¹æ³•
- å­¦ä¼šäº†æŒ‡é’ˆç±»å‹åœ¨éƒ¨åˆ†æ›´æ–°ä¸­çš„åº”ç”¨
- å®ç°äº†è‡ªå®šä¹‰é”™è¯¯ç±»å‹

### ä¸‹ä¸€æ­¥
åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°æ•°æ®å­˜å‚¨å±‚ï¼Œå­¦ä¹ å¦‚ä½•å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œè¿™äº›æ•°æ®æ¨¡å‹ã€‚

---

**æ•°æ®æ¨¡å‹æ˜¯åº”ç”¨çš„åŸºçŸ³ï¼Œè®¾è®¡å¥½äº†æ¨¡å‹ï¼Œåç»­å¼€å‘å°±ä¼šäº‹åŠåŠŸå€ï¼** ğŸš€
